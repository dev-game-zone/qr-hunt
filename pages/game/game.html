<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Scavenger Hunt â€“ Game</title>
  <link rel="stylesheet" href="../../styles/styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<main>
  <h2>Find the QR Codes to Reveal the Letters!</h2>
  <p id="progress">Letters found: <span id="letters">none yet</span></p>

  <div class="button-group">
    <button id="scan">Scan QR Code</button>
    <button id="reset">Reset Progress</button>
  </div>

  <p id="msg"></p>
</main>

<!-- Scripts -->
<script src="../../scripts/config.js"></script>
<script src="../../scripts/app.js"></script>
<script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
<script src="../../scripts/qrcode.min.js"></script>

<script>
window.addEventListener("DOMContentLoaded", () => {
  const lettersEl = document.getElementById("letters");
  const msg = document.getElementById("msg");
  const scanBtn = document.getElementById("scan");
  const resetBtn = document.getElementById("reset");

  // Access check
  if (sessionStorage.getItem("access") !== "granted") {
    window.location.href = CONFIG.BASE_PATH + "index.html";
    return;
  }

  // Display found letters
  function renderLetters() {
    const letters = store.letters;
    lettersEl.textContent = letters.join(" ") || "none yet";
  }

  renderLetters();

  // Reset button
  resetBtn.onclick = () => {
    store.reset();
    renderLetters();
    msg.textContent = "Progress cleared!";
  };

  // Go to scanner
  scanBtn.onclick = () => {
    window.location.href = CONFIG.BASE_PATH + "pages/scan/scan.html";
  };
});
</script>
</body>
</html>
